<app-main-pages-header [title]="'Profile'" [hasBackBtn]="false" [hasExternalBtn]="false" [hasSearchBtn]="false">
</app-main-pages-header>

<ion-content>

  <ion-refresher slot="fixed" [pullFactor]="0.5" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div *ngIf="user !== null; else elseBlock">
    <app-user-profile-info-card [type]="'personal'" (changePageEmmiter)="openPage($event)" [user]="user">
    </app-user-profile-info-card>
    <!-- View receipts button -->
    <ion-button expand="block" class="ion-margin" (click)="openPage('receipts')">View receipts</ion-button>
    <!-- Statistics card -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Statistics</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <app-bar-graph [title]="'Savings'" [data]="user ? user.history : []"></app-bar-graph>
        <app-bar-graph [title]="'Income'" [data]="user ? user.history : []"></app-bar-graph>
        <app-bar-graph [title]="'Outcome'" [data]="user ? user.history : []"></app-bar-graph>
      </ion-card-content>
    </ion-card>
    <!-- Feedback button -->
    <ion-button expand="block" class="ion-margin" (click)="openPage('feedback')">Feedback</ion-button>
    <!-- Logout button -->
    <ion-button expand="block" fill="outline" class="ion-margin" (click)="logout()">Logout</ion-button>
  </div>

  <ng-template #elseBlock>
    Loading ...
  </ng-template>

</ion-content>
